# Vitest + Currents

Report test results generated by Vitest to Currents

## Setup

- Get a Record key and Project ID from Currents dashboard
- Run Vitest tests using `vitest` command

```sh
npm run test
```

- Convert JUnit test results to Currents-compatible format

```sh
npx currents convert \
  --input-format=junit \
  --input-file=results.xml \
  --framework=postman \
  --framework-version=v11.2.0
```

- Upload the results to Currents

```sh
npx currents upload --key=your-record-key --project-id=currents-project-id
```

## Example

```bash
# Run Vitest tests
❯ npm run test

# Convert Vitest results to Currents results
❯ npx currents convert \
  --input-format=junit \
  --input-file=results.xml \
  --framework=postman \
  --framework-version=v11.2.0
[currents] Convertion files: results.xml
[currents] Conversion completed, report saved to: /Users/miguelangarano/Documents/GitHub/generic-api-example/packages/vitest/.currents/2025-02-12T23-48-19-456Z-98201537-912f-4969-8bdc-a147003e8670

# Report the results to Currents
❯ npx currents upload --key=xxx --project-id=yyy

Currents config: {
  projectId: 'kLfVfq',
  recordKey: '*****',
  removeTitleTags: false,
  disableTitleTags: false,
  debug: false
}
Report directory: /Users/agoldis/currents-junit-xml-example/packages/vitest/.currents/2024-11-27T21-14-06-189Z-24038566-8abf-42b5-910d-2af57dd4d3c6
[Tests] Run created: https://app.currents.dev/run/178ad580f51fc637
```

🎉

